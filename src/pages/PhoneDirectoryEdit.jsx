import React from 'react'
export default function PhoneDirectoryEdit(){ const [items,setItems]=React.useState([]); const [form,setForm]=React.useState({name:'',ext:'',location:'',dept:''}); React.useEffect(()=>{ fetch('/data/phone.json').then(r=>r.json()).then(j=> setItems(j.items||[])) },[]); const add=()=>{ if(!form.name||!form.ext) return alert('Name and Ext required'); setItems(prev=>[...prev,form]); setForm({name:'',ext:'',location:'',dept:''}) }; const remove=(idx)=> setItems(prev=>prev.filter((_,i)=>i!==idx)); const download=()=>{ const blob=new Blob([JSON.stringify({items},null,2)],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='phone.json'; a.click(); URL.revokeObjectURL(url) }; return (<div className='space-y-4'><h1 className='text-xl font-semibold'>Phone Directory Editor</h1><div className='grid md:grid-cols-4 gap-2'><input placeholder='Name' className='border rounded px-2 py-1' value={form.name} onChange={e=>setForm({...form, name:e.target.value})}/><input placeholder='Ext' className='border rounded px-2 py-1' value={form.ext} onChange={e=>setForm({...form, ext:e.target.value})}/><input placeholder='Location' className='border rounded px-2 py-1' value={form.location} onChange={e=>setForm({...form, location:e.target.value})}/><input placeholder='Dept' className='border rounded px-2 py-1' value={form.dept} onChange={e=>setForm({...form, dept:e.target.value})}/><button onClick={add} className='mt-2 md:mt-0 border rounded px-3 py-1'>Add</button><button onClick={download} className='mt-2 md:mt-0 border rounded px-3 py-1'>Download JSON</button></div><div className='overflow-auto rounded-xl border bg-white'><table className='w-full text-sm'><thead className='bg-gray-50 border-b'><tr><th className='px-3 py-2 text-left'>Name</th><th className='px-3 py-2 text-left'>Ext</th><th className='px-3 py-2 text-left'>Location</th><th className='px-3 py-2 text-left'>Dept</th><th></th></tr></thead><tbody>{items.map((r,i)=>(<tr key={i} className='border-b last:border-0'><td className='px-3 py-2'>{r.name}</td><td className='px-3 py-2'>{r.ext}</td><td className='px-3 py-2'>{r.location}</td><td className='px-3 py-2'>{r.dept}</td><td className='px-3 py-2 text-right'><button onClick={()=>remove(i)} className='border rounded px-2 py-1'>Remove</button></td></tr>))}</tbody></table></div></div>) }